{"version":3,"file":"js/511.8041451e.js","mappings":"sKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,IAAI,OAAOC,YAAY,CAAC,MAAQ,SAASC,MAAM,CAAC,MAAQN,EAAIO,KAAK,MAAQP,EAAIQ,MAAM,cAAc,UAAU,CAACN,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,gBAAgB,CAACJ,EAAG,WAAW,CAACO,MAAM,CAACC,MAAOV,EAAIO,KAAKI,YAAaC,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIO,KAAM,cAAeM,EAAI,EAAEE,WAAW,uBAAuB,GAAGb,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,KAAO,kBAAkB,CAACJ,EAAG,YAAY,CAACc,YAAY,kBAAkBV,MAAM,CAAC,OAAU,GAAEN,EAAIiB,mBAAmB,kBAAiB,EAAM,aAAajB,EAAIkB,oBAAoB,gBAAgBlB,EAAImB,qBAAqB,CAAEnB,EAAIO,KAAKa,cAAelB,EAAG,MAAM,CAACc,YAAY,SAASV,MAAM,CAAC,IAAMN,EAAIO,KAAKa,iBAAiBlB,EAAG,IAAI,CAACc,YAAY,yCAAyC,GAAGd,EAAG,eAAe,CAACA,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,WAAWe,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIuB,QAAQ,IAAI,CAACvB,EAAIwB,GAAG,UAAUtB,EAAG,YAAY,CAACmB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOtB,EAAIyB,aAAa,OAAO,IAAI,CAACzB,EAAIwB,GAAG,SAAS,IAAI,IAAI,EAC5iC,EACIE,EAAkB,G,UCiCtB,GACAC,OACA,OACApB,KAAAA,CACAI,YAAAA,GACAS,cAAAA,IAEAZ,MAAAA,CACAG,YAAAA,CACA,CAAAiB,UAAAA,EAAAC,QAAAA,WAAAC,QAAAA,SAEAV,cAAAA,CACA,CAAAQ,UAAAA,EAAAC,QAAAA,UAAAC,QAAAA,UAIA,EAEAC,QAAAA,CAEAN,aAAAA,GACA,2BACA,EAEAF,SAEA,iCACA,GAGAS,EAAAA,EAAAA,UAAAA,IAAAA,KAAAA,MAAAA,MAAAA,IACAC,QAAAA,IAAAA,SAAAA,GACA,iBAEA,iCAGA,iCAGA,mCAEA,GAEA,EAGAf,oBAAAA,EAAAA,GACAe,QAAAA,IAAAA,GAEA,8BACA,EAGAd,mBAAAA,GACA,8BACA,qBAOA,OANA,GACA,yCAEA,GACA,yCAEA,IACA,ICnGkQ,I,UCQ9Pe,GAAY,OACd,EACAnC,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAeQ,EAAiB,O","sources":["webpack://dsk-ms-client/./src/views/author/AuthorAdd.vue","webpack://dsk-ms-client/src/views/author/AuthorAdd.vue","webpack://dsk-ms-client/./src/views/author/AuthorAdd.vue?0f19","webpack://dsk-ms-client/./src/views/author/AuthorAdd.vue?84c2"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-form',{ref:\"form\",staticStyle:{\"width\":\"600px\"},attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"作者姓名\",\"prop\":\"author_name\"}},[_c('el-input',{model:{value:(_vm.form.author_name),callback:function ($$v) {_vm.$set(_vm.form, \"author_name\", $$v)},expression:\"form.author_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选择头像\",\"prop\":\"author_avatar\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":`${_vm.uploadURL}/upload`,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.form.author_avatar)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.form.author_avatar}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"立即新增\")]),_c('el-button',{on:{\"click\":function($event){return _vm.cancelExpert('form')}}},[_vm._v(\"取消\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 添加作者表单 -->\r\n    <el-form\r\n      ref=\"form\"\r\n      :model=\"form\"\r\n      :rules=\"rules\"\r\n      label-width=\"100px\"\r\n      style=\"width: 600px\"\r\n    >\r\n      <el-form-item label=\"作者姓名\" prop=\"author_name\">\r\n        <el-input v-model=\"form.author_name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"选择头像\" prop=\"author_avatar\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"`${uploadURL}/upload`\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"form.author_avatar\" :src=\"form.author_avatar\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submit()\">立即新增</el-button>\r\n        <el-button @click=\"cancelExpert('form')\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport httpApi from \"@/http/index.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        author_name: \"\", // 封装作者名字\r\n        author_avatar: \"\", // 封装作者头像路径\r\n      },\r\n      rules: {\r\n        author_name: [\r\n          { required: true, message: \"作者姓名不能为空\", trigger: \"blur\" },\r\n        ],\r\n        author_avatar: [\r\n          { required: true, message: \"请选择一张头像\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    //取消清空表单\r\n    cancelExpert(form){\r\n      this.$refs[form].resetFields();\r\n    },\r\n    /** 提交表单 */\r\n    submit() {\r\n      // 验证表单，只有验证通过才发请求\r\n      this.$refs[\"form\"].validate((valid) => {\r\n        if (valid) {\r\n          // let url = \"http://localhost:3060/book-author/add\";\r\n\r\n          httpApi.authorAPI.add(this.form).then((res) => {\r\n            console.log(\"添加作者结果\", res);\r\n            if (res.data.code == 200) {\r\n              // 成功\r\n              this.$message.success(\"恭喜，添加成功\");\r\n            } else {\r\n              // 失败\r\n              this.$message.error(\"添加失败，稍后重试\");\r\n            }\r\n            // 重置表单\r\n            this.$refs[\"form\"].resetFields();\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    /** 上传成功后执行 */\r\n    handleAvatarSuccess(res, file) {\r\n      console.log(res);\r\n      // 将res.data中保存的图片访问链接，存入this.form.author_avatar\r\n      this.form.author_avatar = res.data;\r\n    },\r\n\r\n    /** 上传之前完成图片格式的验证 */\r\n    beforeAvatarUpload(file) {\r\n      const isJPG = file.type === \"image/jpeg\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>\r\n\r\n<style>\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  display: block;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuthorAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuthorAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuthorAdd.vue?vue&type=template&id=517d7d70&scoped=true&\"\nimport script from \"./AuthorAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./AuthorAdd.vue?vue&type=script&lang=js&\"\nimport style1 from \"./AuthorAdd.vue?vue&type=style&index=1&id=517d7d70&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"517d7d70\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","ref","staticStyle","attrs","form","rules","model","value","author_name","callback","$$v","$set","expression","staticClass","uploadURL","handleAvatarSuccess","beforeAvatarUpload","author_avatar","on","$event","submit","_v","cancelExpert","staticRenderFns","data","required","message","trigger","methods","httpApi","console","component"],"sourceRoot":""}
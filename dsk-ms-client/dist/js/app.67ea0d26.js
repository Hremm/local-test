(function(){"use strict";var e={790:function(e,t){const n={DEV:{dskURL:"http://localhost:3060",uploadURL:"http://localhost:9000"},PRO:{dskURL:"http://120.46.191.127:3060",uploadURL:"http://120.46.191.127:9000"}};t["Z"]=n.PRO},2921:function(e,t,n){var i=n(6369),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],s=n(1001),r={},l=(0,s.Z)(r,o,a,!1,null,null,null),c=l.exports,u=(n(7658),n(4239)),m=n(2631),d=function(){var e=this,t=e._self._c;return t("div",[t("el-container",{staticStyle:{height:"100vh"}},[t("el-aside",{staticClass:"aside",style:{width:(e.isCollapse?65:240)+"px",transition:"0.4s"}},[t("el-menu",{staticClass:"el-menu-vertical-demo",style:{height:"100vh"},attrs:{router:"","default-active":e.$route.path,"background-color":"#345","text-color":"#bbb",collapse:e.isCollapse}},[t("el-menu-item",[t("img",{attrs:{width:"30px",src:n(7597),alt:""}}),t("template",{slot:"title"},[t("span",{staticStyle:{"font-size":"1.2em",color:"#efefef","font-weight":"bold"}},[e._v("  读书客后台管理系统")])])],2),e._l(e.menu,(function(n){return["menu-item"==n.type?t("el-menu-item",{key:n.title,attrs:{index:n.link}},[t("template",{slot:"title"},[t("i",{class:n.icon}),e._v(" "+e._s(n.title)+" ")])],2):t("el-submenu",{key:n.title,attrs:{index:n.link}},[t("template",{slot:"title"},[t("i",{class:n.icon}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.title))])]),e._l(n.children,(function(n){return t("el-menu-item",{key:n.title,attrs:{index:n.link}},[t("i",{class:n.icon}),t("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(n.title))])])}))],2)]}))],2)],1),t("el-container",[t("el-header",{staticClass:"header"},[t("i",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"el-icon-s-fold",on:{click:function(t){e.isCollapse=!0}}}),t("i",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],staticClass:"el-icon-s-unfold",on:{click:function(t){e.isCollapse=!1}}}),t("el-breadcrumb",{staticStyle:{"margin-left":"20px",flex:"1"},attrs:{separator:"/"}},e._l(e.$route.meta.thumb,(function(n){return t("el-breadcrumb-item",{key:n},[e._v(e._s(n))])})),1),e.admin?[t("span",[e._v(e._s(e.admin.username))])]:e._e()],2),t("tags"),t("el-main",[t("router-view")],1)],1)],1)],1)},h=[],p=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"tabs_content"},[t("el-tabs",{attrs:{closable:"",type:"editable-card"},on:{"tab-remove":e.removeTab,"tab-click":e.tabClick},nativeOn:{contextmenu:function(t){return t.preventDefault(),e.openContextMenu(t)}},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.tabList,(function(e){return t("el-tab-pane",{key:e.name,staticClass:"isActive",attrs:{label:e.name,name:e.path}})})),1)],1),t("ul",{directives:[{name:"show",rawName:"v-show",value:e.contextMenu.isShow,expression:"contextMenu.isShow"}],staticClass:"el-dropdown-menu el-popper",style:{left:e.contextMenu.menuLeft+"px",top:"100px"},attrs:{"x-placement":"bottom-end"}},[t("li",{staticClass:"el-dropdown-menu__item",on:{click:e.closeRightTag}},[e._v("关闭右侧")]),t("li",{staticClass:"el-dropdown-menu__item",on:{click:e.closeLeftTag}},[e._v("关闭左侧")]),t("li",{staticClass:"el-dropdown-menu__item",on:{click:e.closeOtherTag}},[e._v("关闭其它")]),this.active==this.contextMenu.name?t("li",{staticClass:"el-dropdown-menu__item",on:{click:e.refresh}},[e._v(" 刷新页面 ")]):e._e(),t("div",{staticClass:"popper__arrow",staticStyle:{left:"44px"},attrs:{"x-arrow":""}})])])},f=[],b={data(){return{active:"/home/index",tabList:[],contextMenu:{name:"",menuLeft:0,isShow:!1,label:""}}},watch:{$route(){this.getThisPage()}},created(){window.addEventListener("beforeunload",(e=>{console.log(this.active,this.tabList),sessionStorage.setItem("tagInfo2",JSON.stringify({active:this.active,tabList:this.tabList}))}));let e=sessionStorage.getItem("tagInfo2")?JSON.parse(sessionStorage.getItem("tagInfo2")):{active:"/home/index",tabList:[{name:"首页",path:"/home/index"}]};console.log(e),this.active=e.active,this.tabList=e.tabList},mounted(){var e=this;document.addEventListener("click",(function(t){e.contextMenu.isShow=!1}))},methods:{getThisPage(){let e=this.$route,t=this.tabList.findIndex((t=>t.path==e.path));-1===t&&this.tabList.push({name:e.name,path:e.path}),this.active=e.path},openContextMenu(e){e.srcElement.id&&(this.contextMenu.name=e.srcElement.id.substr(4),this.contextMenu.menuLeft=e.clientX-45,this.contextMenu.isShow=!0,this.contextMenu.label=e.srcElement.innerText)},tabClick(e){console.log(e),this.$router.push(e.name),this.active=e.name},removeTab(e){let t=this.tabList;if(t.length<=1)this.$message.warning("这是最后一页, 不能再关闭了");else{let n=this.active;n===e&&t.forEach(((i,o)=>{if(i.path===e){let e=t[o+1]||t[o-1];e&&(n=e.path)}})),this.active=n,this.$router.push(n),this.tabList=t.filter((t=>t.path!==e))}},refresh(){this.$router.go(0)},closeRightTag(){let e=this.contextMenu.name,t=this.tabList.findIndex((t=>t.path==e));this.tabList.splice(t+1,this.tabList.length-t),this.active=e,this.$router.push(e)},closeLeftTag(){let e=this.contextMenu.name,t=this.tabList.findIndex((t=>t.path==e));this.tabList.splice(0,t),this.active=e,this.$router.push(e)},closeOtherTag(){let e=this.contextMenu.name,t=this.contextMenu.label;this.tabList=[{name:t,path:e}],this.active=e,this.$router.push(e)}}},v=b,g=(0,s.Z)(v,p,f,!1,null,"7901b7fe",null),k=g.exports,y=n(3822),x={components:{tags:k},data(){return{isCollapse:!1,menu:[]}},computed:{...(0,y.rn)(["admin","cityname"])},mounted(){let e=[{type:"menu-item",title:"首页",link:"/home/index",icon:"el-icon-message"},{type:"sub-menu",link:"1",title:"作者管理",icon:"el-icon-user-solid",children:[{type:"memu-item",link:"/home/author-list",title:"作者列表",icon:"el-icon-user"},{type:"memu-item",link:"/home/author-add",title:"新增作者",icon:"el-icon-plus"}]},{type:"sub-memu",link:"2",title:"图书管理",icon:"el-icon-s-management",children:[{type:"memu-item",link:"/home/book-list",title:"图书列表",icon:"el-icon-tickets"},{type:"memu-item",link:"/home/book-add",title:"新增图书",icon:"el-icon-plus"}]},{type:"sub-memu",link:"3",title:"书店管理",icon:"el-icon-location",children:[{type:"memu-item",link:"/home/bookstore-list",title:"书店列表",icon:"el-icon-notebook-2"},{type:"memu-item",link:"/home/bookstore-add",title:"新增书店",icon:"el-icon-plus"}]},{type:"sub-memu",link:"4",title:"用户管理",icon:"el-icon-user",children:[{type:"memu-item",link:"/home/user-list",title:"用户列表",icon:"el-icon-notebook-2"}]}];this.menu=e}},_=x,w=(0,s.Z)(_,d,h,!1,null,"e4e3a69c",null),C=w.exports;i["default"].use(m.ZP);const L=[{path:"/",redirect:"/home/index"},{path:"/home",name:"home",component:C,children:[{path:"index",name:"首页",component:()=>n.e(872).then(n.bind(n,9872)),meta:{thumb:["首页"]}},{path:"author-list",name:"作者列表",component:()=>Promise.all([n.e(479),n.e(553)]).then(n.bind(n,8553)),meta:{thumb:["作者管理","作者列表"]}},{path:"author-add",name:"新增作者",component:()=>Promise.all([n.e(479),n.e(511)]).then(n.bind(n,5511)),meta:{thumb:["作者管理","新增作者"]}},{path:"book-list",name:"图书列表",component:()=>Promise.all([n.e(479),n.e(669)]).then(n.bind(n,4669)),meta:{thumb:["图书管理","图书列表"]}},{path:"book-add",name:"新增图书",component:()=>Promise.all([n.e(479),n.e(18)]).then(n.bind(n,4018)),meta:{thumb:["图书管理","新增图书"]}},{path:"book-update/:id",name:"修改图书",component:()=>Promise.all([n.e(479),n.e(599)]).then(n.bind(n,5599)),meta:{thumb:["图书管理","修改图书"]}},{path:"bookstore-add",name:"添加书店",component:()=>Promise.all([n.e(479),n.e(361)]).then(n.bind(n,8065)),meta:{thumb:["书店管理","添加书店"]}},{path:"bookstore-list",name:"书店列表",component:()=>Promise.all([n.e(479),n.e(601)]).then(n.bind(n,1601)),meta:{thumb:["书店管理","书店列表"]}},{path:"bookstore-update/:id",name:"编辑书店",component:()=>Promise.all([n.e(479),n.e(443)]).then(n.bind(n,5443)),meta:{thumb:["书店管理","编辑书店"]}},{path:"user-list",name:"用户列表",component:()=>Promise.all([n.e(479),n.e(65)]).then(n.bind(n,2065)),meta:{thumb:["用户管理","用户列表"]}}]},{path:"/admin/login",component:()=>Promise.all([n.e(479),n.e(919)]).then(n.bind(n,7919))}],S=new m.ZP({mode:"history",base:"/",routes:L});S.beforeEach(((e,t,n)=>{console.log(e),"/admin/login"==e.path||u.Z.state.admin?n():S.push("/admin/login")}));var P=S,O=n(8499),T=n.n(O),M=n(790);i["default"].use(T()),i["default"].config.productionTip=!1;const E=M.Z.uploadURL;i["default"].prototype.uploadURL=E,window._AMapSecurityConfig={securityJsCode:"ce9e830b9cbb20ae4ce751f720164aa5"},new i["default"]({router:P,store:u.Z,render:e=>e(c)}).$mount("#app")},4239:function(e,t,n){var i=n(6369),o=n(3822);i["default"].use(o.ZP),t["Z"]=new o.ZP.Store({state:{admin:JSON.parse(sessionStorage.getItem("admin")),city:"郑州",token:sessionStorage.getItem("token")},getters:{},mutations:{updateUser(e,t){e.admin=t,sessionStorage.setItem("admin",JSON.stringify(t))},saveToken(e,t){e.token=t,sessionStorage.setItem("token",t)}},actions:{loginAndSaveUser(e,t){e.commit("updateUser",{nickname:"测试用户"})}},modules:{}})},7597:function(e,t,n){e.exports=n.p+"img/dsk_logo.a43c7786.svg"}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var a=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,a){if(!i){var s=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],a=e[u][2];for(var r=!0,l=0;l<i.length;l++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(r=!1,a<s&&(s=a));if(r){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[i,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{18:"8ac93154",65:"01ec530c",361:"880c4121",443:"8a297a29",479:"23b6b25a",511:"8041451e",553:"bcc6b086",599:"8cb559c7",601:"411d6c4c",669:"0f61ad1e",872:"1459eb20",919:"f81fa1a1"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{18:"6243022c",511:"6243022c",553:"989c816b",599:"6243022c",919:"d9e01ca8"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="dsk-ms-client:";n.l=function(i,o,a,s){if(e[i])e[i].push(o);else{var r,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==i||m.getAttribute("data-webpack")==t+a){r=m;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,n.nc&&r.setAttribute("nonce",n.nc),r.setAttribute("data-webpack",t+a),r.src=i),e[i]=[o];var d=function(t,n){r.onerror=r.onload=null,clearTimeout(h);var o=e[i];if(delete e[i],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,i,o){var a=document.createElement("link");a.rel="stylesheet",a.type="text/css";var s=function(n){if(a.onerror=a.onload=null,"load"===n.type)i();else{var s=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=r,a.parentNode.removeChild(a),o(l)}};return a.onerror=a.onload=s,a.href=t,n?n.parentNode.insertBefore(a,n.nextSibling):document.head.appendChild(a),a},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=n[i],a=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(a===e||a===t))return o}var s=document.getElementsByTagName("style");for(i=0;i<s.length;i++){o=s[i],a=o.getAttribute("data-href");if(a===e||a===t)return o}},i=function(i){return new Promise((function(o,a){var s=n.miniCssF(i),r=n.p+s;if(t(s,r))return o();e(i,r,null,o,a)}))},o={143:0};n.f.miniCss=function(e,t){var n={18:1,511:1,553:1,599:1,919:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=i(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,i){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise((function(n,i){o=e[t]=[n,i]}));i.push(o[2]=a);var s=n.p+n.u(t),r=new Error,l=function(i){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",r.name="ChunkLoadError",r.type=a,r.request=s,o[1](r)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,a,s=i[0],r=i[1],l=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)n.o(r,o)&&(n.m[o]=r[o]);if(l)var u=l(n)}for(t&&t(i);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(u)},i=self["webpackChunkdsk_ms_client"]=self["webpackChunkdsk_ms_client"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2921)}));i=n.O(i)})();
//# sourceMappingURL=app.67ea0d26.js.map